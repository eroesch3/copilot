{"ast":null,"code":"import _objectSpread from \"/Users/user/ga/project4/copilot/copilot_app/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/user/ga/project4/copilot/copilot_app/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport { withRouter } from 'react-router';\nimport decode from 'jwt-decode';\nimport ActivitiesView from './components/ActivitiesView';\nimport ActivityPage from './components/ActivityPage';\nimport CreateActivity from './components/CreateActivity';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport { createActivity, readAllActivities, updateActivity, destroyActivity, loginUser, registerUser } from './services/api-helper';\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_id: '',\n      activities: [],\n      activityForm: {\n        name: \"\",\n        category: \"\",\n        hours_spent: null,\n        date: null\n      },\n      currentUser: null,\n      authFormData: {\n        username: \"\",\n        email: \"\",\n        password: \"\"\n      }\n    };\n    this.handleFormChange = this.handleFormChange.bind(this);\n    this.mountEditForm = this.mountEditForm.bind(this);\n    this.editActivity = this.editActivity.bind(this);\n    this.deleteActivity = this.deleteActivity.bind(this);\n    this.newActivity = this.newActivity.bind(this);\n    this.handleLoginButton = this.handleLoginButton.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.handleRegister = this.handleRegister.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n    this.authHandleChange = this.authHandleChange.bind(this);\n  } // componentDidMount() {\n  //   this.getTeachers();\n  //   const checkUser = localStorage.getItem(\"jwt\");\n  //   if (checkUser) {\n  //     const user = decode(checkUser);\n  //     this.setState({\n  //       currentUser: user\n  //     })\n  //   }\n  // }\n\n\n  async getActivities() {\n    const activities = await readAllActivities(this.state.user_id);\n    this.setState({\n      activities\n    });\n  }\n\n  async newActivity(e) {\n    e.preventDefault();\n    console.log(\"e: \", e.target.category.value);\n    const activityObject = {\n      category: e.target.category.value,\n      name: e.target.name.value,\n      hours_spent: e.target.category.hours_spent,\n      date: e.target.category.date\n    };\n    console.log(this.state.user_id);\n    const activity = await createActivity(this.state.user_id, activityObject);\n    this.setState(prevState => ({\n      activities: [...prevState.activities, activity],\n      activityForm: {\n        name: \"\",\n        category: \"\",\n        hours_spent: null,\n        date: null\n      }\n    }));\n  }\n\n  async editActivity() {\n    const activityForm = this.state.activityForm;\n    await updateActivity(this.state.user_id, activityObject);\n    this.setState(prevState => ({\n      activities: prevState.activities.map(activity => activity.id === activityForm.id ? activityForm : activity)\n    }));\n  }\n\n  async deleteActivity(id) {\n    await destroyActivity(id);\n    this.setState(prevState => ({\n      activities: prevState.activities.filter(activity => activity.id !== id)\n    }));\n  }\n\n  handleFormChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState(prevState => ({\n      activityForm: _objectSpread({}, prevState.activityForm, {\n        [name]: value\n      })\n    }));\n  }\n\n  async mountEditForm(id) {\n    const activities = await readAllActivities(this.state.user_id);\n    const activity = activities.find(el => el.id === parseInt(id));\n    this.setState({\n      activityForm: activity\n    });\n  } // -------------- AUTH ------------------\n\n\n  handleLoginButton() {\n    this.props.history.push(\"/login\");\n  }\n\n  async handleLogin() {\n    const userData = await loginUser(this.state.authFormData);\n    this.setState({\n      currentUser: decode(userData.user.token),\n      user_id: userData.user.id\n    });\n    localStorage.setItem(\"jwt\", userData.user.token);\n    this.getActivities();\n  }\n\n  async handleRegister(e) {\n    e.preventDefault();\n    await registerUser(this.state.authFormData);\n    this.handleLogin();\n  }\n\n  handleLogout() {\n    localStorage.removeItem(\"jwt\");\n    this.setState({\n      currentUser: null\n    });\n    window.location.pathname = '/';\n  }\n\n  authHandleChange(e) {\n    const _e$target2 = e.target,\n          name = _e$target2.name,\n          value = _e$target2.value;\n    this.setState(prevState => ({\n      authFormData: _objectSpread({}, prevState.authFormData, {\n        [name]: value\n      })\n    }));\n  }\n\n  render() {\n    const onActivitiesPage = window.location.pathname.slice(-10) === 'activities' ? true : false;\n    console.log(onActivitiesPage);\n    const user_id = this.state.user_id;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      onClick: () => this.setState({\n        activityForm: {\n          name: \"\",\n          category: \"\",\n          hours_spent: null,\n          date: null\n        }\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Copilot\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, this.state.currentUser ? React.createElement(React.Fragment, null, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, this.state.currentUser.username), React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"logout\")) : React.createElement(\"button\", {\n      onClick: this.handleLoginButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Login/Register\"))), React.createElement(Link, {\n      to: \"/users/\".concat(user_id, \"/activities\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"View Activities\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/users/\".concat(user_id, \"/activities\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Create Activity\"), \"\\xA0\", React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: () => React.createElement(Login, {\n        handleLogin: this.handleLogin,\n        handleChange: this.authHandleChange,\n        formData: this.state.authFormData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      render: () => React.createElement(Register, {\n        handleRegister: this.handleRegister,\n        handleChange: this.authHandleChange,\n        formData: this.state.authFormData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/users/\".concat(user_id, \"/activities\"),\n      render: props => {\n        // const { user_id } = props.match.params;\n        // const { id } = props.match.params;\n        // const id = this.state.activities.find(el => el.id\n        // === parseInt(id)); \n        return onActivitiesPage && React.createElement(ActivitiesView, {\n          user_id: user_id,\n          activities: this.state.activities,\n          handleFormChange: this.handleFormChange,\n          activityForm: this.state.activityForm,\n          newActivity: this.newActivity,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/users/\".concat(user_id, \"/activities\"),\n      render: () => React.createElement(CreateActivity, {\n        handleFormChange: this.handleFormChange,\n        activityForm: this.state.activityForm,\n        newActivity: this.newActivity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/users/\".concat(user_id, \"/activities/:id\"),\n      render: props => {\n        const id = props.match.params.id;\n        const activity = this.state.activities.find(el => el.id === parseInt(id));\n        {\n          console.log('activityForm in App.js:', this.state.activityForm);\n        }\n        return React.createElement(ActivityPage, {\n          id: id,\n          activity: activity,\n          handleFormChange: this.handleFormChange,\n          mountEditForm: this.mountEditForm,\n          editActivity: this.editActivity,\n          activityForm: this.state.activityForm,\n          deleteActivity: this.deletActivity,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/user/ga/project4/copilot/copilot_app/client/src/App.js"],"names":["React","Component","Route","Link","withRouter","decode","ActivitiesView","ActivityPage","CreateActivity","Login","Register","createActivity","readAllActivities","updateActivity","destroyActivity","loginUser","registerUser","App","constructor","props","state","user_id","activities","activityForm","name","category","hours_spent","date","currentUser","authFormData","username","email","password","handleFormChange","bind","mountEditForm","editActivity","deleteActivity","newActivity","handleLoginButton","handleLogin","handleRegister","handleLogout","authHandleChange","getActivities","setState","e","preventDefault","console","log","target","value","activityObject","activity","prevState","map","id","filter","find","el","parseInt","history","push","userData","user","token","localStorage","setItem","removeItem","window","location","pathname","render","onActivitiesPage","slice","match","params","deletActivity"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport { withRouter } from 'react-router';\nimport decode from 'jwt-decode';\n\nimport ActivitiesView from './components/ActivitiesView';\nimport ActivityPage from './components/ActivityPage';\nimport CreateActivity from './components/CreateActivity'\nimport Login from './components/Login'\nimport Register from './components/Register'\n\nimport {\n  createActivity,\n  readAllActivities,\n  updateActivity,\n  destroyActivity,\n  loginUser,\n  registerUser\n} from './services/api-helper'\n\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_id: '',\n      activities: [],\n      activityForm: {\n        name: \"\",\n        category: \"\",\n        hours_spent: null,\n        date: null\n\n      },\n      currentUser: null,\n      authFormData: {\n        username: \"\",\n        email: \"\",\n        password: \"\"\n      }\n    };\n    this.handleFormChange = this.handleFormChange.bind(this)\n    this.mountEditForm = this.mountEditForm.bind(this)\n    this.editActivity = this.editActivity.bind(this)\n    this.deleteActivity = this.deleteActivity.bind(this)\n    this.newActivity = this.newActivity.bind(this)\n    this.handleLoginButton = this.handleLoginButton.bind(this)\n    this.handleLogin = this.handleLogin.bind(this)\n    this.handleRegister = this.handleRegister.bind(this)\n    this.handleLogout = this.handleLogout.bind(this)\n    this.authHandleChange = this.authHandleChange.bind(this)\n  }\n\n\n  // componentDidMount() {\n  //   this.getTeachers();\n  //   const checkUser = localStorage.getItem(\"jwt\");\n  //   if (checkUser) {\n  //     const user = decode(checkUser);\n  //     this.setState({\n  //       currentUser: user\n  //     })\n  //   }\n  // }\n\n  async getActivities() {\n    const activities = await readAllActivities(this.state.user_id);\n    this.setState({\n      activities\n    })\n  }\n\n\n    async newActivity(e) {\n      e.preventDefault();\n      console.log(\"e: \", e.target.category.value)\n      const activityObject = {\n        category: e.target.category.value,\n        name: e.target.name.value,\n        hours_spent: e.target.category.hours_spent,\n        date: e.target.category.date\n      }\n      console.log(this.state.user_id)\n      const activity = await createActivity(this.state.user_id, activityObject)\n      this.setState(prevState => ({\n        activities: [...prevState.activities, activity],\n        activityForm: {\n          name: \"\",\n          category: \"\",\n          hours_spent: null,\n          date: null\n        }\n      }))\n      }\n\n\n  async editActivity() {\n    const { activityForm } = this.state\n    await updateActivity(this.state.user_id, activityObject);\n    this.setState(prevState => (\n      {\n        activities: prevState.activities.map(activity => activity.id === activityForm.id ? activityForm : activity),\n      }\n    ))\n  }\n\n  async deleteActivity(id) {\n    await destroyActivity(id);\n    this.setState(prevState => ({\n      activities: prevState.activities.filter(activity => activity.id !== id)\n    }))\n  }\n\n  handleFormChange(e) {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      activityForm: {\n        ...prevState.activityForm,\n        [name]: value\n      }\n    }))\n  }\n\n  async mountEditForm(id) {\n    const activities = await readAllActivities(this.state.user_id);\n    const activity = activities.find(el => el.id === parseInt(id));\n    this.setState({\n      activityForm: activity\n    });\n  }\n\n  // -------------- AUTH ------------------\n\n  handleLoginButton() {\n    this.props.history.push(\"/login\")\n  }\n\n  async handleLogin() {\n    const userData = await loginUser(this.state.authFormData);\n    this.setState({\n      currentUser: decode(userData.user.token),\n      user_id: userData.user.id\n    })\n    localStorage.setItem(\"jwt\", userData.user.token)\n    this.getActivities();\n  }\n\n  async handleRegister(e) {\n    e.preventDefault();\n    await registerUser(this.state.authFormData);\n    this.handleLogin();\n  }\n\n  handleLogout() {\n    localStorage.removeItem(\"jwt\");\n    this.setState({\n      currentUser: null\n    })\n    window.location.pathname = '/';\n  }\n\n  authHandleChange(e) {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      authFormData: {\n        ...prevState.authFormData,\n        [name]: value\n      }\n    }));\n  }\n\n  render() {\n    \n    const onActivitiesPage = window.location.pathname.slice(-10) === 'activities' ? true : false\n    console.log(onActivitiesPage)\n    const user_id = this.state.user_id\n\n    return (\n      <div className=\"App\">\n        <header>\n          <h1><Link to='/' onClick={() => this.setState({\n            activityForm: {\n              name: \"\",\n              category: \"\",\n              hours_spent: null,\n              date: null\n            }\n          })}>Copilot</Link></h1>\n          <div>\n          {this.state.currentUser\n            ?\n            <>\n              <p>{this.state.currentUser.username}</p>\n              <button onClick={this.handleLogout}>logout</button>\n            </>\n            :\n            <button onClick={this.handleLoginButton}>Login/Register</button>\n          }\n          </div>\n        </header>\n\n        <Link to={`/users/${user_id}/activities`}>View Activities</Link>\n        <br/>\n        <Link to={`/users/${user_id}/activities`}>Create Activity</Link>&nbsp;\n        {/* <Link to=\"/flavors\">Flavors</Link> */}\n\n\n        <Route exact path=\"/login\" render={() => (\n          <Login\n            handleLogin={this.handleLogin}\n            handleChange={this.authHandleChange}\n            formData={this.state.authFormData} />)} />\n        <Route exact path=\"/register\" render={() => (\n          <Register\n            handleRegister={this.handleRegister}\n            handleChange={this.authHandleChange}\n            formData={this.state.authFormData} />)} />\n\n\n{/* XXXXXXXXXXXXXXXXXXXXXXXXXX  Option 1: Noon Tues  WIP SHOW ACTIVITIES IF NEED TO GO BACK */}\n        \n        {/* <Route\n          exact path=\"/users/:user_id/activities\"\n          render={() => (\n            <ActivitiesView\n              activities={this.state.activities}\n              activityForm={this.state.activityForm}\n              handleFormChange={this.handleFormChange}\n              newActivity={this.newActivity} />\n          )}\n        /> */}\n\n{/* XXXXXXXXXXXXXXXXXXXXXXXXXX Option 2:  11:10AM Tues WIP SHOW ACTIVITIES IF NEED TO GO BACK */}\n        <Route\n          path={`/users/${user_id}/activities`}\n          render={(props) => {\n            // const { user_id } = props.match.params;\n            // const { id } = props.match.params;\n            // const id = this.state.activities.find(el => el.id\n            // === parseInt(id)); \n            return  onActivitiesPage && <ActivitiesView\n              user_id={user_id}\n              activities={this.state.activities}\n              handleFormChange={this.handleFormChange}\n              activityForm={this.state.activityForm}\n              newActivity={this.newActivity} /> \n          }} />\n{/* XXXXXXXXXXXXXXXXXXXXXXXXXX     END OF SHOW ACTIVITIES */}\n\n\n        <Route\n          path={`/users/${user_id}/activities`}\n          render={() => (\n            <CreateActivity\n              handleFormChange={this.handleFormChange}\n              activityForm={this.state.activityForm}\n              newActivity={this.newActivity} />\n          )} />\n\n\n        <Route\n          path={`/users/${user_id}/activities/:id`}\n          \n          render={(props) => {\n            const { id } = props.match.params;\n            const activity = this.state.activities.find(el => el.id === parseInt(id));\n\n            {console.log('activityForm in App.js:', this.state.activityForm)}\n            \n            return <ActivityPage\n              id={id}\n              activity={activity}\n              handleFormChange={this.handleFormChange}\n              mountEditForm={this.mountEditForm}\n              editActivity={this.editActivity}\n              activityForm={this.state.activityForm}\n              deleteActivity={this.deletActivity} />\n\n              \n\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);"]},"metadata":{},"sourceType":"module"}